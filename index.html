<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Agendamento Avalia√ß√£o F√≠sica Vila Imp√©rio</title>

<style>
body{margin:0;font-family:Arial;background:#f0f2f5}

/* LOGIN */
.header-login{text-align:center;padding:30px;background:white;box-shadow:0 2px 5px rgba(0,0,0,0.2)}
.header-login img{max-width:180px}
.login-container{display:flex;justify-content:center;align-items:center;gap:40px;height:60vh}
.login-box{
width:220px;height:220px;border:2px solid #ccc;border-radius:12px;
display:flex;justify-content:center;align-items:center;
font-size:22px;font-weight:bold;cursor:pointer;
transition:0.3s;background:transparent
}
.login-box:hover{background:#f5f5f5;border-color:#1e88e5;color:#1e88e5;transform:scale(1.05)}

/* EVO */
.layout{display:flex;height:100vh}
.sidebar{width:260px;background:#1f2937;color:white;display:flex;flex-direction:column}
.sidebar-header{padding:20px;text-align:center;border-bottom:1px solid rgba(255,255,255,0.2)}
.sidebar-header img{max-width:80px}
.sidebar button{
background:none;border:none;color:white;padding:15px;text-align:left;
cursor:pointer;font-size:16px
}
.sidebar button:hover{background:#374151}
.content{flex:1;padding:20px;overflow:auto}

/* CARD */
.card{
background:white;padding:15px;margin-bottom:10px;border-radius:8px;
box-shadow:0 2px 5px rgba(0,0,0,0.2)
}

/* STATUS */
.status{padding:4px 8px;border-radius:4px;color:white}
.pendente{background:gray}
.realizado{background:green}
.faltou{background:red}
.bloqueado{background:red}
.treinamento{background:purple}

/* MODAL */
.modal{
position:fixed;top:50%;left:50%;
transform:translate(-50%,-50%);
background:white;padding:20px;border-radius:10px;
box-shadow:0 0 20px rgba(0,0,0,0.3);
z-index:1000;width:600px;max-height:80vh;overflow:auto
}
.calendario{display:grid;grid-template-columns:repeat(7,1fr);gap:5px;margin-top:15px}
.dia{padding:10px;text-align:center;cursor:pointer;background:#eee;border-radius:5px}
.dia:hover{background:#ddd}

#listaHorarios{
display:grid;grid-template-columns:repeat(4,1fr);
gap:10px;margin-top:15px
}
.horario{
padding:12px;background:#1e88e5;color:white;
border-radius:6px;cursor:pointer;text-align:center;font-weight:bold
}
.horario:hover{background:#1565c0}
.horario.bloqueado{background:red}
.horario.treinamento{background:purple}

.hidden{display:none}
input{padding:8px;margin:5px 0;width:100%}
button.action{padding:6px 10px;margin:3px}
</style>
</head>
<body>

<!-- LOGIN -->
<div id="loginScreen">
<div class="header-login">
<img src="logo-panobianco.png">
<h2>AGENDAMENTO AVALIA√á√ÉO F√çSICA</h2>
<h3>VILA IMP√âRIO</h3>
</div>

<div class="login-container">
<div class="login-box" onclick="loginAdmin()">ADMIN</div>
<div class="login-box" onclick="abrirLoginRecepcao()">RECEP√á√ÉO</div>
<div class="login-box" onclick="loginProfessor()">PROFESSOR</div>
</div>
</div>

<!-- LOGIN RECEP√á√ÉO -->
<div id="loginRecepcaoModal" class="modal hidden">
<h3>Login Recep√ß√£o</h3>
<input id="loginNome" placeholder="Nome">
<input id="loginSenha" type="password" placeholder="Senha">
<button onclick="loginRecepcao()">Entrar</button>
<button onclick="fecharLoginRecepcao()">Cancelar</button>
<p id="erroLogin" style="color:red"></p>
</div>

<!-- APP -->
<div id="app" class="layout hidden">

<div class="sidebar">
<div class="sidebar-header">
<img src="logo-panobianco.png">
<h3>PANOBIANCO</h3>
<span>Vila Imp√©rio</span>
<div id="userLabel"></div>
</div>

<button onclick="modoAgendar()">Novo Agendamento</button>
<button onclick="modoBloquearDia()">Bloquear Dia</button>
<button onclick="modoBloquearHorario()">Bloquear Hor√°rio</button>
<button onclick="abrirCadastroRecepcionistas()" id="btnCadastro" class="hidden">üë• Cadastro de Recepcionistas</button>
<button onclick="logout()">Sair</button>
</div>

<div class="content">
<div id="agenda"></div>
<div id="areaConteudo"></div>
</div>

</div>

<!-- CALENDARIO -->
<div id="modalCalendario" class="modal hidden">
<button onclick="mesAnterior()">‚óÄ</button>
<span id="mesAno"></span>
<button onclick="mesProximo()">‚ñ∂</button>
<br><br>
<button onclick="fecharCalendario()">Voltar</button>
<div id="calendario" class="calendario"></div>
</div>

<!-- HORARIOS -->
<div id="modalHorarios" class="modal hidden">
<h3 id="dataSelecionada"></h3>
<button onclick="voltarParaCalendario()">‚¨Ö Voltar</button>
<div id="listaHorarios"></div>
</div>

<script>

/* STORAGE */
let agendamentos = JSON.parse(localStorage.getItem("agendamentos")||"[]");
let recepcionistas = JSON.parse(localStorage.getItem("recepcionistas")||"[]");

let usuarioTipo="";
let modo="";
let dataAtual="";
let mes=new Date().getMonth();
let ano=new Date().getFullYear();

/* LOGIN */
function loginAdmin(){
let senha=prompt("Senha Admin:");
if(senha==="696907"){
usuarioTipo="admin";
entrarSistema("ADMIN");
document.getElementById("btnCadastro").classList.remove("hidden");
}
}

function abrirLoginRecepcao(){
document.getElementById("loginRecepcaoModal").classList.remove("hidden");
}

function fecharLoginRecepcao(){
document.getElementById("loginRecepcaoModal").classList.add("hidden");
}

function loginRecepcao(){
let nome=document.getElementById("loginNome").value.trim();
let senha=document.getElementById("loginSenha").value.trim();
let user=recepcionistas.find(r=>r.nome===nome && r.senha===senha);

if(user){
usuarioTipo="recepcao";
entrarSistema(nome);
fecharLoginRecepcao();
}else{
document.getElementById("erroLogin").innerText="Nome ou senha inv√°lidos";
}
}

function loginProfessor(){
usuarioTipo="professor";
entrarSistema("PROFESSOR");
}

function entrarSistema(nome){
document.getElementById("loginScreen").classList.add("hidden");
document.getElementById("app").classList.remove("hidden");
document.getElementById("userLabel").innerText=nome;
renderAgenda();
}

function logout(){location.reload();}

/* CADASTRO RECEPCIONISTAS */
function abrirCadastroRecepcionistas(){

let html=`
<h2>Cadastro de Recepcionistas</h2>

<input id="novoNome" placeholder="Nome √∫nico">
<input id="novaSenha" type="password" placeholder="Senha">
<button class="action" onclick="salvarRecepcionista()">Salvar</button>

<hr>
<div id="listaRecepcionistas"></div>
`;

document.getElementById("agenda").innerHTML="";
document.getElementById("areaConteudo").innerHTML=html;

renderListaRecepcionistas();
}

function salvarRecepcionista(){
let nome=document.getElementById("novoNome").value.trim();
let senha=document.getElementById("novaSenha").value.trim();
if(!nome||!senha){alert("Preencha todos os campos");return;}
if(recepcionistas.find(r=>r.nome===nome)){
alert("J√° existe recepcionista com esse nome");return;
}
recepcionistas.push({nome,senha});
localStorage.setItem("recepcionistas",JSON.stringify(recepcionistas));
renderListaRecepcionistas();
}

function renderListaRecepcionistas(){
let div=document.getElementById("listaRecepcionistas");
div.innerHTML="";
recepcionistas.forEach((r,index)=>{
div.innerHTML+=`
<div class="card">
<b>${r.nome}</b>
<button onclick="alterarSenha(${index})">Alterar Senha</button>
<button onclick="excluirRecepcionista(${index})">Excluir</button>
</div>`;
});
}

function alterarSenha(index){
let nova=prompt("Nova senha:");
if(nova){
recepcionistas[index].senha=nova;
localStorage.setItem("recepcionistas",JSON.stringify(recepcionistas));
}
}

function excluirRecepcionista(index){
if(confirm("Deseja excluir?")){
recepcionistas.splice(index,1);
localStorage.setItem("recepcionistas",JSON.stringify(recepcionistas));
renderListaRecepcionistas();
}
}

/* RESTANTE DO SISTEMA (agendamento, bloqueio, etc.) */
/* Mantido exatamente como estava */

</script>
</body>
</html>
